  {
    "size": 0,
    "query": {"range": {"event_date": {"gte": "2024-01-01", "lt": "2025-01-01"}}},
    "aggs": {
      "rids": {
        "terms": {"field": "rid", "size": 10000},
        "aggs": {
          "month_count": {
            "cardinality": {
              "field": "event_date",
              "precision_threshold": 100
            }
          },
          "multi_month": {
            "bucket_selector": {
              "buckets_path": {"count": "month_count"},
              "script": "params.count > 1"
            }
          }
        }
      }
    }
  }